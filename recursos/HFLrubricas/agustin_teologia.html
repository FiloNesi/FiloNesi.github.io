<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Correcci√≥n EVAU: San Agust√≠n ‚Äî Dios</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { margin: 0; font-family: system-ui, -apple-system, sans-serif; }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState } = React;

    /* ‚ïê‚ïê‚ïê ICONOS SVG inline (sin dependencia de lucide-react) ‚ïê‚ïê‚ïê */
    const IconDownload = () => (
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
    );
    const IconReset = () => (
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="1 4 1 10 7 10"/><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/></svg>
    );

    /* ‚ïê‚ïê‚ïê DATOS ‚ïê‚ïê‚ïê */
    const criteriosImprescindibles = [
      {
        bloque: "1. Finalidad del ser humano",
        puntosBloque: 0.30,
        items: [
          { id: "imp1a", texto: "Dios como fin √∫ltimo al que tiende el ser humano", puntos: 0.10 },
          { id: "imp1b", texto: "Visi√≥n de Dios como destino final de los bienaventurados en la otra vida", puntos: 0.10 },
          { id: "imp1c", texto: "Necesidad de la gracia divina para alcanzar dicho fin", puntos: 0.10 },
        ],
      },
      {
        bloque: "2. V√≠a de la interioridad (prueba principal)",
        puntosBloque: 0.50,
        items: [
          { id: "imp2a", texto: "Camino de la interioridad: orientar la mirada a la profundidad del alma", puntos: 0.15 },
          { id: "imp2b", texto: "Al volverse sobre s√≠ misma, el alma encuentra una verdad que la supera", puntos: 0.15 },
          { id: "imp2c", texto: "Esa verdad no puede tener su origen en el alma; su origen es Dios", puntos: 0.10 },
          { id: "imp2d", texto: "Referencia al ¬´con√≥cete a ti mismo¬ª socr√°tico: reconocerse como imagen del Creador", puntos: 0.10 },
        ],
      },
      {
        bloque: "3. Otras pruebas de la existencia de Dios",
        puntosBloque: 0.40,
        items: [
          { id: "imp3a", texto: "Perfecci√≥n/orden del mundo: existencia de un ser supremo ordenador", puntos: 0.10 },
          { id: "imp3b", texto: "Consensus gentium: la mayor√≠a de los seres humanos reconoce un ser supremo", puntos: 0.10 },
          { id: "imp3c", texto: "Grados del bien: distintos niveles del bien exigen la existencia de un bien supremo", puntos: 0.10 },
          { id: "imp3d", texto: "Las pruebas confirman racionalmente lo ya cre√≠do y admitido por la fe", puntos: 0.10 },
        ],
      },
      {
        bloque: "4. Car√°cter de las pruebas y enfoque agustiniano",
        puntosBloque: 0.30,
        items: [
          { id: "imp4a", texto: "No son demostraciones te√≥ricas (a diferencia de Tom√°s de Aquino)", puntos: 0.10 },
          { id: "imp4b", texto: "Reflexi√≥n desde la experiencia personal: itinerario hacia Dios (admiraci√≥n del mundo ‚Üí interior del alma ‚Üí Dios)", puntos: 0.10 },
          { id: "imp4c", texto: "Prop√≥sito: acallar la inquietud del coraz√≥n y proporcionar la felicidad (goce de Dios)", puntos: 0.10 },
        ],
      },
      {
        bloque: "5. Atributos de Dios ‚Äî Esencia divina",
        puntosBloque: 0.25,
        items: [
          { id: "imp5a", texto: "Car√°cter inefable de la esencia divina (no se puede expresar plenamente con palabras)", puntos: 0.10 },
          { id: "imp5b", texto: "Tres atributos esenciales de Dios: ser, verdad y bien", puntos: 0.10 },
          { id: "imp5c", texto: "Cada atributo se asocia a una persona de la Trinidad", puntos: 0.05 },
        ],
      },
      {
        bloque: "6. Atributos de las tres personas de la Trinidad",
        puntosBloque: 0.25,
        items: [
          { id: "imp6a", texto: "Dios Padre ‚Üí atributo del ser: esencia pura, sin accidentes ni cambio (¬´Yo soy el que soy¬ª)", puntos: 0.10 },
          { id: "imp6b", texto: "Dios Hijo ‚Üí atributo de la verdad: verbo o palabra encarnada, verdad suprema", puntos: 0.08 },
          { id: "imp6c", texto: "Dios Esp√≠ritu Santo ‚Üí atributo del bien: vida, amor y donaci√≥n de vida", puntos: 0.07 },
        ],
      },
    ];

    const criteriosComplementarios = [
      { id: "comp1", texto: "Vigencia actual del pensamiento de San Agust√≠n", puntos: 0.05 },
      { id: "comp2", texto: "Contextualizaci√≥n hist√≥rica adecuada (s. IV-V, patr√≠stica, cristianismo)", puntos: 0.05 },
      { id: "comp3", texto: "Diferencia con Plotino: alma general (neoplatonismo) vs. alma individual (Agust√≠n)", puntos: 0.05 },
      { id: "comp4", texto: "Influencia del neoplatonismo en la v√≠a de la interioridad", puntos: 0.05 },
      { id: "comp5", texto: "Referencia b√≠blica al √âxodo: ¬´Yo soy el que soy¬ª", puntos: 0.05 },
      { id: "comp6", texto: "Presencia de los atributos divinos en el alma humana (imagen y semejanza)", puntos: 0.05 },
      { id: "comp7", texto: "El alma humana es, conoce y da vida al cuerpo (reflejo de la Trinidad)", puntos: 0.05 },
      { id: "comp8", texto: "Conflicto interior como rasgo de la persona individual en San Agust√≠n", puntos: 0.05 },
      { id: "comp9", texto: "Relaci√≥n fe-raz√≥n: la raz√≥n confirma lo que la fe ya acepta", puntos: 0.05 },
      { id: "comp10", texto: "Admiraci√≥n por el orden del mundo como inicio del itinerario hacia Dios", puntos: 0.05 },
    ];

    const vocabularioConfig = {
      niveles: [
        { id: "vocab_exc", label: "Excelente (8+ t√©rminos)", puntos: 0.25 },
        { id: "vocab_ade", label: "Adecuado (5-7 t√©rminos)", puntos: 0.15 },
        { id: "vocab_lim", label: "Limitado (3-4 t√©rminos)", puntos: 0.10 },
        { id: "vocab_esc", label: "Escaso o impreciso", puntos: 0.05 },
      ],
      cohesion: [
        { id: "coh_buena", label: "Buena cohesi√≥n", puntos: 0.08 },
        { id: "coh_acep", label: "Aceptable", puntos: 0.05 },
        { id: "coh_def", label: "Deficiente", puntos: 0.02 },
      ],
      coherencia: [
        { id: "coher_buena", label: "Buena coherencia", puntos: 0.09 },
        { id: "coher_acep", label: "Aceptable", puntos: 0.05 },
        { id: "coher_def", label: "Deficiente", puntos: 0.02 },
      ],
      estructura: [
        { id: "est_intro", texto: "Estructura intro-desarrollo-conclusi√≥n clara", puntos: 0.03 },
        { id: "est_ideas", texto: "Distingue ideas principales de secundarias", puntos: 0.03 },
        { id: "est_prog", texto: "Progresi√≥n l√≥gica del argumento", puntos: 0.02 },
      ],
    };

    const penalizaciones = {
      conceptuales: [
        { id: "pen_c1", texto: "Confundir las pruebas de San Agust√≠n con las cinco v√≠as de Tom√°s de Aquino", puntos: -0.20 },
        { id: "pen_c2", texto: "Atribuir incorrectamente los atributos (ser, verdad, bien) a las personas de la Trinidad", puntos: -0.15 },
        { id: "pen_c3", texto: "Afirmar que San Agust√≠n demuestra a Dios de forma puramente racional/te√≥rica", puntos: -0.15 },
        { id: "pen_c4", texto: "Confundir la posici√≥n de San Agust√≠n con la de Plotino sobre el alma", puntos: -0.10 },
        { id: "pen_c5", texto: "Omitir completamente el papel de la fe en las pruebas agustinianas", puntos: -0.10 },
      ],
      redaccion: [
        { id: "pen_r1", texto: "Faltas de ortograf√≠a reiteradas", puntos: -0.05 },
        { id: "pen_r2", texto: "Uso incorrecto o ausencia de conectores", puntos: -0.03 },
        { id: "pen_r3", texto: "Frases confusas o mal construidas", puntos: -0.03 },
        { id: "pen_r4", texto: "Repetici√≥n excesiva de ideas sin desarrollo", puntos: -0.02 },
      ],
    };

    const vocabularioTerminos = {
      basico: [
        "Interioridad", "Gracia divina", "Trinidad", "Atributos de Dios",
        "Inefable", "Esencia", "Ser supremo", "Verdad", "Bien",
        "Bienaventurados", "Fe", "Alma",
      ],
      complementario: [
        "Consensus gentium", "Grados del bien", "Neoplatonismo", "Plotino",
        "Accidentes", "Verbo / Palabra", "Esencia pura", "Imagen y semejanza",
        "√âxodo", "Itinerario hacia Dios", "Conflicto interior",
        "Donaci√≥n de vida", "Tom√°s de Aquino", "Goce de Dios",
      ],
    };

    /* ‚ïê‚ïê‚ïê COMPONENTE PRINCIPAL ‚ïê‚ïê‚ïê */
    function CorreccionSanAgustinDios() {
      const [studentName, setStudentName] = useState("");
      const [scores, setScores] = useState({});
      const [vocabNivel, setVocabNivel] = useState(null);
      const [cohesionNivel, setCohesionNivel] = useState(null);
      const [coherenciaNivel, setCoherenciaNivel] = useState(null);
      const [estructuraScores, setEstructuraScores] = useState({});
      const [penalizacionesActivas, setPenalizacionesActivas] = useState({});
      const [vocabularioUsado, setVocabularioUsado] = useState({});
      const [showResetConfirm, setShowResetConfirm] = useState(false);
      const [expandedSections, setExpandedSections] = useState({
        imprescindibles: true,
        complementarios: true,
        vocabularioRedaccion: true,
        penalizacionesSec: true,
        vocabTecnico: true,
      });

      const toggleSection = (sec) =>
        setExpandedSections((p) => ({ ...p, [sec]: !p[sec] }));

      const toggleScore = (id, puntos) => {
        setScores((prev) => {
          const copy = { ...prev };
          if (copy[id]) delete copy[id];
          else copy[id] = puntos;
          return copy;
        });
      };

      const togglePenalizacion = (id, puntos) => {
        setPenalizacionesActivas((prev) => {
          const copy = { ...prev };
          if (copy[id]) delete copy[id];
          else copy[id] = puntos;
          return copy;
        });
      };

      const toggleVocab = (term) => {
        setVocabularioUsado((prev) => {
          const copy = { ...prev };
          if (copy[term]) delete copy[term];
          else copy[term] = true;
          return copy;
        });
      };

      const toggleEstructura = (id, puntos) => {
        setEstructuraScores((prev) => {
          const copy = { ...prev };
          if (copy[id]) delete copy[id];
          else copy[id] = puntos;
          return copy;
        });
      };

      /* ‚îÄ‚îÄ C√°lculos ‚îÄ‚îÄ */
      const puntosImprescindiblesSolo = Object.entries(scores)
        .filter(([k]) => k.startsWith("imp"))
        .reduce((s, [, v]) => s + v, 0);

      const puntosComplementarios = Object.entries(scores)
        .filter(([k]) => k.startsWith("comp"))
        .reduce((s, [, v]) => s + v, 0);

      const puntosVocabNivel =
        vocabNivel !== null
          ? vocabularioConfig.niveles.find((n) => n.id === vocabNivel)?.puntos || 0
          : 0;
      const puntosCohesion =
        cohesionNivel !== null
          ? vocabularioConfig.cohesion.find((n) => n.id === cohesionNivel)?.puntos || 0
          : 0;
      const puntosCoherencia =
        coherenciaNivel !== null
          ? vocabularioConfig.coherencia.find((n) => n.id === coherenciaNivel)?.puntos || 0
          : 0;
      const puntosEstructura = Object.values(estructuraScores).reduce((s, v) => s + v, 0);
      const puntosVocabRedaccion =
        puntosVocabNivel + puntosCohesion + puntosCoherencia + puntosEstructura;

      const totalPenalizaciones = Object.values(penalizacionesActivas).reduce((s, v) => s + v, 0);

      const totalBruto =
        puntosImprescindiblesSolo + puntosComplementarios + puntosVocabRedaccion + totalPenalizaciones;
      const totalFinal = Math.min(3.0, Math.max(0, totalBruto));

      const vocabCount = Object.keys(vocabularioUsado).length;

      const resetAll = () => {
        setStudentName("");
        setScores({});
        setVocabNivel(null);
        setCohesionNivel(null);
        setCoherenciaNivel(null);
        setEstructuraScores({});
        setPenalizacionesActivas({});
        setVocabularioUsado({});
        setShowResetConfirm(false);
      };

      /* ‚îÄ‚îÄ Exportar TXT ‚îÄ‚îÄ */
      const exportTXT = () => {
        const fecha = new Date().toLocaleDateString("es-ES");
        const nombre = studentName.trim() || "Estudiante";
        let txt = "";
        txt += "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n";
        txt += "  CORRECCI√ìN EVAU ‚Äî SAN AGUST√çN: DIOS (EXISTENCIA,\n";
        txt += "  ATRIBUTOS Y FINALIDAD DEL SER HUMANO)\n";
        txt += "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n";
        txt += "  Estudiante: " + nombre + "\n";
        txt += "  Fecha: " + fecha + "\n";
        txt += "  NOTA FINAL: " + totalFinal.toFixed(2) + " / 3,00\n";
        txt += "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n";

        txt += "‚îÄ‚îÄ DESGLOSE POR CATEGOR√çAS ‚îÄ‚îÄ\n";
        txt += "  ‚Ä¢ Contenidos imprescindibles: " + puntosImprescindiblesSolo.toFixed(2) + " / 2,00\n";
        txt += "  ‚Ä¢ Contenidos complementarios: " + puntosComplementarios.toFixed(2) + " / 0,50\n";
        txt += "  ‚Ä¢ Vocabulario y redacci√≥n:     " + puntosVocabRedaccion.toFixed(2) + " / 0,50\n";
        txt += "  ‚Ä¢ Penalizaciones:              " + totalPenalizaciones.toFixed(2) + "\n\n";

        txt += "‚îÄ‚îÄ CONTENIDOS IMPRESCINDIBLES ‚îÄ‚îÄ\n";
        criteriosImprescindibles.forEach((bloque) => {
          txt += "\n  " + bloque.bloque + " (" + bloque.puntosBloque.toFixed(2) + " pts)\n";
          bloque.items.forEach((it) => {
            const sel = scores[it.id];
            txt += sel
              ? "    ‚úì " + it.texto + " (+" + it.puntos.toFixed(2) + ")\n"
              : "    ‚óã " + it.texto + "\n";
          });
        });

        txt += "\n‚îÄ‚îÄ CONTENIDOS COMPLEMENTARIOS ‚îÄ‚îÄ\n";
        criteriosComplementarios.forEach((it) => {
          const sel = scores[it.id];
          txt += sel
            ? "  ‚úì " + it.texto + " (+" + it.puntos.toFixed(2) + ")\n"
            : "  ‚óã " + it.texto + "\n";
        });

        txt += "\n‚îÄ‚îÄ VOCABULARIO Y REDACCI√ìN ‚îÄ‚îÄ\n";
        if (vocabNivel) {
          const nv = vocabularioConfig.niveles.find((n) => n.id === vocabNivel);
          txt += "  Vocabulario t√©cnico: " + nv.label + " (+" + nv.puntos.toFixed(2) + ")\n";
        }
        if (cohesionNivel) {
          const nv = vocabularioConfig.cohesion.find((n) => n.id === cohesionNivel);
          txt += "  Cohesi√≥n: " + nv.label + " (+" + nv.puntos.toFixed(2) + ")\n";
        }
        if (coherenciaNivel) {
          const nv = vocabularioConfig.coherencia.find((n) => n.id === coherenciaNivel);
          txt += "  Coherencia: " + nv.label + " (+" + nv.puntos.toFixed(2) + ")\n";
        }
        vocabularioConfig.estructura.forEach((it) => {
          if (estructuraScores[it.id])
            txt += "  ‚úì " + it.texto + " (+" + it.puntos.toFixed(2) + ")\n";
        });

        txt += "\n‚îÄ‚îÄ VOCABULARIO T√âCNICO DETECTADO ‚îÄ‚îÄ\n";
        const usados = Object.keys(vocabularioUsado);
        const noUsadosB = vocabularioTerminos.basico.filter((t) => !vocabularioUsado[t]);
        const noUsadosC = vocabularioTerminos.complementario.filter((t) => !vocabularioUsado[t]);
        txt += "  T√©rminos detectados (" + usados.length + "): " + (usados.join(", ") || "Ninguno") + "\n";
        txt += "  B√°sicos NO utilizados: " + (noUsadosB.join(", ") || "Todos presentes") + "\n";
        txt += "  Complementarios NO utilizados: " + (noUsadosC.join(", ") || "Todos presentes") + "\n";

        if (Object.keys(penalizacionesActivas).length > 0) {
          txt += "\n‚îÄ‚îÄ PENALIZACIONES APLICADAS ‚îÄ‚îÄ\n";
          [...penalizaciones.conceptuales, ...penalizaciones.redaccion].forEach((p) => {
            if (penalizacionesActivas[p.id])
              txt += "  ‚úó " + p.texto + " (" + p.puntos.toFixed(2) + ")\n";
          });
        }

        txt += "\n‚îÄ‚îÄ OBSERVACIONES ‚îÄ‚îÄ\n";
        txt += "  \n  \n  \n";
        txt += "\n‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n";
        txt += "  Generado con Corrector EVAU Filosof√≠a\n";
        txt += "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n";

        const blob = new Blob([txt], { type: "text/plain;charset=utf-8" });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        const safeName = nombre.replace(/\s+/g, "_");
        a.href = url;
        a.download = safeName + "_SanAgustin_Dios.txt";
        a.click();
        URL.revokeObjectURL(url);
      };

      /* ‚îÄ‚îÄ Render helpers ‚îÄ‚îÄ */
      const SectionHeader = ({ title, sectionKey, icon, color }) => (
        <button
          onClick={() => toggleSection(sectionKey)}
          className={"w-full flex items-center justify-between px-5 py-3 rounded-xl font-bold text-white text-left " + color}
        >
          <span className="flex items-center gap-2">
            <span>{icon}</span>
            <span>{title}</span>
          </span>
          <span className="text-xl">{expandedSections[sectionKey] ? "‚ñæ" : "‚ñ∏"}</span>
        </button>
      );

      const CriterioBtn = ({ id, texto, puntos, selected, onClick, negative }) => (
        <button
          onClick={onClick}
          className={"w-full text-left p-3 rounded-lg border-2 transition-all flex items-start gap-3 " +
            (selected
              ? negative
                ? "bg-red-50 border-red-400"
                : "bg-green-50 border-green-400"
              : "bg-gray-50 border-gray-200 hover:border-gray-300")}
        >
          <span
            className={"mt-0.5 flex-shrink-0 w-5 h-5 rounded flex items-center justify-center text-xs font-bold " +
              (selected
                ? negative
                  ? "bg-red-500 text-white"
                  : "bg-green-500 text-white"
                : "bg-white border border-gray-300")}
          >
            {selected ? (negative ? "‚úó" : "‚úì") : ""}
          </span>
          <span className="flex-1 text-sm leading-snug">{texto}</span>
          <span
            className={"flex-shrink-0 text-xs font-bold px-2 py-0.5 rounded-full " +
              (negative ? "bg-red-100 text-red-700" : "bg-green-100 text-green-700")}
          >
            {negative ? "" : "+"}{puntos.toFixed(2)} pts
          </span>
        </button>
      );

      const RadioGroup = ({ items, selected, onSelect }) => (
        <div className="space-y-2">
          {items.map((it) => (
            <button
              key={it.id}
              onClick={() => onSelect(selected === it.id ? null : it.id)}
              className={"w-full text-left p-3 rounded-lg border-2 transition-all flex items-center gap-3 " +
                (selected === it.id
                  ? "bg-green-50 border-green-400"
                  : "bg-gray-50 border-gray-200 hover:border-gray-300")}
            >
              <span
                className={"w-4 h-4 rounded-full border-2 flex items-center justify-center " +
                  (selected === it.id ? "border-green-500" : "border-gray-300")}
              >
                {selected === it.id && (
                  <span className="w-2 h-2 rounded-full bg-green-500" />
                )}
              </span>
              <span className="flex-1 text-sm">{it.label}</span>
              <span className="text-xs font-bold text-green-700 bg-green-100 px-2 py-0.5 rounded-full">
                +{it.puntos.toFixed(2)} pts
              </span>
            </button>
          ))}
        </div>
      );

      return (
        <div className="min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 p-4 md:p-6">
          <div className="max-w-4xl mx-auto space-y-5">

            {/* ‚ïê‚ïê‚ïê HEADER ‚ïê‚ïê‚ïê */}
            <div className="bg-white rounded-2xl shadow-lg overflow-hidden">
              <div className="bg-gradient-to-r from-indigo-600 via-purple-600 to-indigo-700 p-5 text-white">
                <h1 className="text-2xl md:text-3xl font-extrabold tracking-tight">
                  Correcci√≥n EVAU: San Agust√≠n
                </h1>
                <p className="text-indigo-200 mt-1 text-sm">
                  Dios: existencia, atributos y finalidad del ser humano ‚Ä¢ EVAU Madrid 2026
                </p>
              </div>
              <div className="p-5 space-y-4">
                <input
                  type="text"
                  value={studentName}
                  onChange={(e) => setStudentName(e.target.value)}
                  placeholder="Nombre Apellido del estudiante..."
                  className="w-full border-2 border-gray-200 rounded-xl px-4 py-2.5 text-sm focus:border-indigo-400 focus:outline-none"
                />
                <div className="flex flex-col sm:flex-row items-center justify-between gap-4">
                  <div className="text-center sm:text-left">
                    <span className="text-xs text-gray-500 uppercase tracking-wide font-semibold">
                      Puntuaci√≥n total
                    </span>
                    <div className="text-4xl font-extrabold text-indigo-700">
                      {totalFinal.toFixed(2)}{" "}
                      <span className="text-lg text-gray-400 font-normal">/ 3,00</span>
                    </div>
                  </div>
                  <div className="flex gap-2">
                    <button
                      onClick={exportTXT}
                      className="flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2.5 rounded-xl text-sm font-semibold transition-colors"
                    >
                      <IconDownload /> Exportar TXT
                    </button>
                    <button
                      onClick={() => setShowResetConfirm(true)}
                      className="flex items-center gap-2 bg-red-500 hover:bg-red-600 text-white px-4 py-2.5 rounded-xl text-sm font-semibold transition-colors"
                    >
                      <IconReset /> Reiniciar
                    </button>
                  </div>
                </div>
              </div>
            </div>

            {/* ‚ïê‚ïê‚ïê CONTENIDOS IMPRESCINDIBLES ‚ïê‚ïê‚ïê */}
            <div className="bg-white rounded-2xl shadow-lg overflow-hidden">
              <SectionHeader
                title="CONTENIDOS IMPRESCINDIBLES (2,00 pts)"
                sectionKey="imprescindibles"
                icon="üìã"
                color="bg-gradient-to-r from-indigo-600 to-indigo-700"
              />
              {expandedSections.imprescindibles && (
                <div className="p-5 space-y-5">
                  {criteriosImprescindibles.map((bloque) => (
                    <div key={bloque.bloque}>
                      <h3 className="font-bold text-gray-700 mb-2 text-sm flex items-center justify-between">
                        <span>{bloque.bloque}</span>
                        <span className="text-indigo-600 bg-indigo-50 px-2 py-0.5 rounded-full text-xs">
                          {bloque.puntosBloque.toFixed(2)} pts
                        </span>
                      </h3>
                      <div className="space-y-2">
                        {bloque.items.map((it) => (
                          <CriterioBtn
                            key={it.id}
                            id={it.id}
                            texto={it.texto}
                            puntos={it.puntos}
                            selected={!!scores[it.id]}
                            onClick={() => toggleScore(it.id, it.puntos)}
                          />
                        ))}
                      </div>
                    </div>
                  ))}
                </div>
              )}
            </div>

            {/* ‚ïê‚ïê‚ïê CONTENIDOS COMPLEMENTARIOS ‚ïê‚ïê‚ïê */}
            <div className="bg-white rounded-2xl shadow-lg overflow-hidden">
              <SectionHeader
                title="CONTENIDOS COMPLEMENTARIOS (0,50 pts)"
                sectionKey="complementarios"
                icon="‚≠ê"
                color="bg-gradient-to-r from-purple-600 to-purple-700"
              />
              {expandedSections.complementarios && (
                <div className="p-5 space-y-2">
                  {criteriosComplementarios.map((it) => (
                    <CriterioBtn
                      key={it.id}
                      id={it.id}
                      texto={it.texto}
                      puntos={it.puntos}
                      selected={!!scores[it.id]}
                      onClick={() => toggleScore(it.id, it.puntos)}
                    />
                  ))}
                </div>
              )}
            </div>

            {/* ‚ïê‚ïê‚ïê VOCABULARIO Y REDACCI√ìN ‚ïê‚ïê‚ïê */}
            <div className="bg-white rounded-2xl shadow-lg overflow-hidden">
              <SectionHeader
                title="VOCABULARIO Y REDACCI√ìN (0,50 pts)"
                sectionKey="vocabularioRedaccion"
                icon="‚úçÔ∏è"
                color="bg-gradient-to-r from-teal-600 to-teal-700"
              />
              {expandedSections.vocabularioRedaccion && (
                <div className="p-5 space-y-5">
                  <div>
                    <h4 className="font-bold text-gray-700 text-sm mb-2">Vocabulario t√©cnico (0,25 pts)</h4>
                    <RadioGroup items={vocabularioConfig.niveles} selected={vocabNivel} onSelect={setVocabNivel} />
                  </div>
                  <div>
                    <h4 className="font-bold text-gray-700 text-sm mb-2">Cohesi√≥n (0,08 pts)</h4>
                    <RadioGroup items={vocabularioConfig.cohesion} selected={cohesionNivel} onSelect={setCohesionNivel} />
                  </div>
                  <div>
                    <h4 className="font-bold text-gray-700 text-sm mb-2">Coherencia general (0,09 pts)</h4>
                    <RadioGroup items={vocabularioConfig.coherencia} selected={coherenciaNivel} onSelect={setCoherenciaNivel} />
                  </div>
                  <div>
                    <h4 className="font-bold text-gray-700 text-sm mb-2">Estructura y progresi√≥n (0,08 pts)</h4>
                    <div className="space-y-2">
                      {vocabularioConfig.estructura.map((it) => (
                        <CriterioBtn
                          key={it.id}
                          id={it.id}
                          texto={it.texto}
                          puntos={it.puntos}
                          selected={!!estructuraScores[it.id]}
                          onClick={() => toggleEstructura(it.id, it.puntos)}
                        />
                      ))}
                    </div>
                  </div>
                </div>
              )}
            </div>

            {/* ‚ïê‚ïê‚ïê PENALIZACIONES ‚ïê‚ïê‚ïê */}
            <div className="bg-white rounded-2xl shadow-lg overflow-hidden">
              <SectionHeader
                title="PENALIZACIONES"
                sectionKey="penalizacionesSec"
                icon="‚ö†Ô∏è"
                color="bg-gradient-to-r from-red-600 to-red-700"
              />
              {expandedSections.penalizacionesSec && (
                <div className="p-5 space-y-5">
                  <div>
                    <h4 className="font-bold text-gray-700 text-sm mb-2">Errores conceptuales graves</h4>
                    <div className="space-y-2">
                      {penalizaciones.conceptuales.map((p) => (
                        <CriterioBtn
                          key={p.id}
                          id={p.id}
                          texto={p.texto}
                          puntos={p.puntos}
                          negative={true}
                          selected={!!penalizacionesActivas[p.id]}
                          onClick={() => togglePenalizacion(p.id, p.puntos)}
                        />
                      ))}
                    </div>
                  </div>
                  <div>
                    <h4 className="font-bold text-gray-700 text-sm mb-2">Problemas de redacci√≥n / ortograf√≠a</h4>
                    <div className="space-y-2">
                      {penalizaciones.redaccion.map((p) => (
                        <CriterioBtn
                          key={p.id}
                          id={p.id}
                          texto={p.texto}
                          puntos={p.puntos}
                          negative={true}
                          selected={!!penalizacionesActivas[p.id]}
                          onClick={() => togglePenalizacion(p.id, p.puntos)}
                        />
                      ))}
                    </div>
                  </div>
                </div>
              )}
            </div>

            {/* ‚ïê‚ïê‚ïê RESUMEN POR CATEGOR√çAS ‚ïê‚ïê‚ïê */}
            <div className="grid grid-cols-2 md:grid-cols-4 gap-3">
              {[
                { label: "Imprescindibles", value: puntosImprescindiblesSolo, max: 2.0, color: "bg-indigo-50 text-indigo-700 border-indigo-200" },
                { label: "Complementarios", value: puntosComplementarios, max: 0.5, color: "bg-purple-50 text-purple-700 border-purple-200" },
                { label: "Vocab. y redacci√≥n", value: puntosVocabRedaccion, max: 0.5, color: "bg-teal-50 text-teal-700 border-teal-200" },
                { label: "Penalizaciones", value: totalPenalizaciones, max: null, color: "bg-red-50 text-red-700 border-red-200" },
              ].map((cat) => (
                <div key={cat.label} className={"rounded-xl border-2 p-3 text-center " + cat.color}>
                  <div className="text-xs font-semibold uppercase tracking-wide opacity-70">{cat.label}</div>
                  <div className="text-2xl font-extrabold mt-1">{cat.value.toFixed(2)}</div>
                  {cat.max !== null && <div className="text-xs opacity-60">/ {cat.max.toFixed(2)}</div>}
                </div>
              ))}
            </div>

            {/* ‚ïê‚ïê‚ïê GU√çA R√ÅPIDA ‚ïê‚ïê‚ïê */}
            <div className="bg-amber-50 border-2 border-amber-200 rounded-2xl p-5">
              <h3 className="font-bold text-amber-800 mb-2 flex items-center gap-2">
                üìñ Gu√≠a r√°pida de correcci√≥n
              </h3>
              <ul className="text-sm text-amber-900 space-y-1.5 list-disc pl-5">
                <li>Verifica que el alumno distingue la <strong>v√≠a de la interioridad</strong> como prueba principal y menciona las restantes (orden del mundo, consensus gentium, grados del bien).</li>
                <li>Comprueba la correcta atribuci√≥n de los <strong>atributos divinos a cada persona de la Trinidad</strong> (Padre ‚Üí ser, Hijo ‚Üí verdad, Esp√≠ritu Santo ‚Üí bien).</li>
                <li>Es clave que se explique que las pruebas agustinianas <strong>no son demostraciones te√≥ricas</strong>, sino confirmaciones racionales de lo aceptado por la fe.</li>
                <li>Valora la menci√≥n de la <strong>finalidad del ser humano</strong>: Dios como fin √∫ltimo y la necesidad de la gracia divina.</li>
                <li>Marca los t√©rminos t√©cnicos en la secci√≥n de vocabulario para obtener un recuento objetivo antes de asignar el nivel.</li>
                <li>Las penalizaciones se aplican solo ante errores claros y graves; no penalizar omisiones leves.</li>
              </ul>
            </div>

            {/* ‚ïê‚ïê‚ïê VOCABULARIO T√âCNICO ‚ïê‚ïê‚ïê */}
            <div className="bg-white rounded-2xl shadow-lg overflow-hidden">
              <SectionHeader
                title="VOCABULARIO T√âCNICO"
                sectionKey="vocabTecnico"
                icon="üî§"
                color="bg-gradient-to-r from-sky-600 to-sky-700"
              />
              {expandedSections.vocabTecnico && (
                <div className="p-5 space-y-4">
                  <div className="text-center">
                    <span className="text-5xl font-extrabold text-sky-700">{vocabCount}</span>
                    <span className="text-gray-400 text-lg ml-1">
                      / {vocabularioTerminos.basico.length + vocabularioTerminos.complementario.length} t√©rminos
                    </span>
                  </div>

                  <div className="grid md:grid-cols-2 gap-4">
                    <div>
                      <h4 className="text-xs font-bold uppercase tracking-wide text-blue-600 mb-2">
                        <span className="bg-blue-100 text-blue-700 px-2 py-0.5 rounded-full">B√°sico</span>
                      </h4>
                      <div className="flex flex-wrap gap-1.5">
                        {vocabularioTerminos.basico.map((t) => (
                          <button
                            key={t}
                            onClick={() => toggleVocab(t)}
                            className={"px-3 py-1.5 rounded-full text-xs font-medium border transition-all " +
                              (vocabularioUsado[t]
                                ? "bg-blue-100 border-blue-400 text-blue-800"
                                : "bg-gray-50 border-gray-200 text-gray-600 hover:border-gray-300")}
                          >
                            {vocabularioUsado[t] && "‚úì "}{t}
                          </button>
                        ))}
                      </div>
                    </div>
                    <div>
                      <h4 className="text-xs font-bold uppercase tracking-wide text-green-600 mb-2">
                        <span className="bg-green-100 text-green-700 px-2 py-0.5 rounded-full">Complementario</span>
                      </h4>
                      <div className="flex flex-wrap gap-1.5">
                        {vocabularioTerminos.complementario.map((t) => (
                          <button
                            key={t}
                            onClick={() => toggleVocab(t)}
                            className={"px-3 py-1.5 rounded-full text-xs font-medium border transition-all " +
                              (vocabularioUsado[t]
                                ? "bg-green-100 border-green-400 text-green-800"
                                : "bg-gray-50 border-gray-200 text-gray-600 hover:border-gray-300")}
                          >
                            {vocabularioUsado[t] && "‚úì "}{t}
                          </button>
                        ))}
                      </div>
                    </div>
                  </div>

                  <div className="bg-sky-50 border border-sky-200 rounded-xl p-3 text-xs text-sky-800">
                    <strong>Criterios de puntuaci√≥n:</strong> Excelente (8+ t√©rminos) = 0,25 pts ¬∑ Adecuado (5-7) = 0,15 pts ¬∑ Limitado (3-4) = 0,10 pts ¬∑ Escaso = 0,05 pts
                  </div>
                </div>
              )}
            </div>

            {/* ‚ïê‚ïê‚ïê MODAL REINICIO ‚ïê‚ïê‚ïê */}
            {showResetConfirm && (
              <div className="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
                <div className="bg-white rounded-2xl shadow-2xl max-w-sm w-full p-6 space-y-4">
                  <h3 className="text-xl font-bold text-gray-800">¬øReiniciar correcci√≥n?</h3>
                  <p className="text-sm text-gray-600">
                    Se perder√°n todos los datos: puntuaciones, penalizaciones, vocabulario y nombre del estudiante.
                  </p>
                  <div className="flex gap-3 justify-end">
                    <button
                      onClick={() => setShowResetConfirm(false)}
                      className="px-4 py-2 rounded-xl text-sm font-semibold bg-gray-100 hover:bg-gray-200 text-gray-700 transition-colors"
                    >
                      Cancelar
                    </button>
                    <button
                      onClick={resetAll}
                      className="px-4 py-2 rounded-xl text-sm font-semibold bg-red-500 hover:bg-red-600 text-white transition-colors"
                    >
                      S√≠, reiniciar
                    </button>
                  </div>
                </div>
              </div>
            )}
          </div>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById("root")).render(<CorreccionSanAgustinDios />);
  </script>
</body>
</html>
