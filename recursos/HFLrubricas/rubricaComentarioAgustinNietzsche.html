<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Correcci√≥n: San Agust√≠n ‚Äì Nietzsche</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js"></script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background: linear-gradient(135deg, #f8fafc 0%, #eef2ff 100%); min-height: 100vh; }
</style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const { useState, useCallback } = React;

const SECTIONS = [
  {
    id: "critica_moral",
    title: "1. Cr√≠tica a la moral occidental y al concepto de Dios",
    maxPoints: 1.6,
    items: [
      { id: "cm1", text: "Identifica que para Nietzsche Dios es una construcci√≥n conceptual, una idea, no un ser real (frente a la afirmaci√≥n agustiniana de Dios como fuente de todo bien y justicia)", weight: 0.4 },
      { id: "cm2", text: "Explica que la aceptaci√≥n de esa idea de Dios constituye, seg√∫n Nietzsche, una forma de esclavitud moral que debe ser superada", weight: 0.4 },
      { id: "cm3", text: "Se√±ala que Nietzsche considera la moral occidental (heredada del platonismo y el cristianismo) como antinatural, contraria a los instintos y a la vida", weight: 0.4 },
      { id: "cm4", text: "Contrapone la filosof√≠a vitalista e irracionalista de Nietzsche con la concepci√≥n racional-teol√≥gica de San Agust√≠n sobre la bondad y la justicia divinas", weight: 0.4 },
    ],
  },
  {
    id: "moral_esclavos",
    title: "2. Cr√≠tica al cristianismo: moral de los esclavos",
    maxPoints: 1.6,
    items: [
      { id: "me1", text: "Distingue entre moral de se√±ores (valores vitales, fuerza, creatividad) y moral de esclavos (sumisi√≥n, obediencia, resentimiento)", weight: 0.4 },
      { id: "me2", text: "Identifica la moral agustiniana (obediencia a Dios, castigo del pecado, pertenencia a Dios) como expresi√≥n de la moral de esclavos", weight: 0.4 },
      { id: "me3", text: 'Explica el resentimiento como mecanismo psicol√≥gico: los d√©biles invierten los valores (bueno = sumiso/obediente, malo = poderoso/aut√≥nomo)', weight: 0.4 },
      { id: "me4", text: 'Conecta la idea de que "nosotros le pertenecemos" y la aceptaci√≥n del castigo divino con la renuncia a la autonom√≠a propia de la moral de esclavos', weight: 0.4 },
    ],
  },
  {
    id: "libertad_trampa",
    title: "3. La libertad como trampa",
    maxPoints: 1.6,
    items: [
      { id: "lt1", text: 'Se√±ala la paradoja del texto: San Agust√≠n presenta el libre arbitrio como un bien, pero condicionado a "vivir rectamente" seg√∫n la voluntad de Dios', weight: 0.4 },
      { id: "lt2", text: "Explica que para Nietzsche esta libertad es ficticia: solo se es libre si se elige lo que Dios manda, lo cual anula la verdadera libertad", weight: 0.4 },
      { id: "lt3", text: "Relaciona con la propuesta nietzscheana de vivir como si Dios no existiera, abrazando la libertad de crear nuevos valores", weight: 0.4 },
      { id: "lt4", text: "Contrapone con la verdadera libertad nietzscheana: la del esp√≠ritu libre o el superhombre (√úbermensch) que crea sus propios valores sin tutela divina", weight: 0.4 },
    ],
  },
  {
    id: "dios_muerto",
    title: '4. "Dios ha muerto": negaci√≥n del Bien objetivo',
    maxPoints: 1.6,
    items: [
      { id: "dm1", text: 'Explica el significado filos√≥fico de la "muerte de Dios": fin de los valores absolutos y del fundamento trascendente de la moral', weight: 0.4 },
      { id: "dm2", text: 'Contrapone directamente con la tesis agustiniana de que "todo bien viene de Dios": para Nietzsche la verdad (absoluta) no existe', weight: 0.4 },
      { id: "dm3", text: "Se√±ala que las perfecciones que San Agust√≠n atribuye a Dios (bondad, justicia, bien) no son algo objetivo ni universal para Nietzsche, sino construcciones humanas", weight: 0.4 },
      { id: "dm4", text: "Menciona el nihilismo como consecuencia de la muerte de Dios y la necesidad de superarlo (nihilismo pasivo ‚Üí activo)", weight: 0.4 },
    ],
  },
  {
    id: "transmutacion",
    title: "5. Transmutaci√≥n de los valores y afirmaci√≥n de la vida",
    maxPoints: 1.6,
    items: [
      { id: "tv1", text: "Define la transmutaci√≥n/transvaloraci√≥n como inversi√≥n radical de los valores morales vigentes (cristianos/plat√≥nicos)", weight: 0.4 },
      { id: "tv2", text: "Explica que los valores agustinianos (bondad divina, justicia como castigo, obediencia, vivir rectamente) son precisamente los que deben ser superados", weight: 0.4 },
      { id: "tv3", text: "Presenta la afirmaci√≥n de la vida tal como es: voluntad de poder, amor fati, eterno retorno, como nuevos valores frente a la negaci√≥n cristiana de lo terrenal", weight: 0.4 },
      { id: "tv4", text: "Vincula la transmutaci√≥n con la figura del superhombre (√úbermensch) como ideal de ser humano que supera la moral cristiana y crea sus propios valores", weight: 0.4 },
    ],
  },
  {
    id: "vocabulario",
    title: "6. Vocabulario filos√≥fico preciso",
    maxPoints: 2.0,
    items: [
      { id: "v1", text: "Usa correctamente t√©rminos de San Agust√≠n: libre arbitrio, pecado, bien, justicia divina, bondad, Dios como fuente del bien, vivir rectamente", weight: 0.5 },
      { id: "v2", text: "Usa correctamente t√©rminos clave de Nietzsche: voluntad de poder, superhombre/√úbermensch, nihilismo, transmutaci√≥n/transvaloraci√≥n de los valores", weight: 0.5 },
      { id: "v3", text: "Emplea correctamente: moral de se√±ores / moral de esclavos, muerte de Dios, resentimiento, filosof√≠a vitalista/irracionalista, eterno retorno, amor fati", weight: 0.5 },
      { id: "v4", text: "Redacci√≥n clara, coherente y con lenguaje filos√≥fico apropiado; elabora un texto justificativo (no mera enumeraci√≥n) que pone en di√°logo a ambos autores", weight: 0.5 },
    ],
  },
];

const GRADE_OPTIONS = [
  { value: 0, label: "No presente", color: "#ef4444", bg: "#fef2f2" },
  { value: 0.5, label: "Parcial", color: "#f59e0b", bg: "#fffbeb" },
  { value: 1, label: "Correcto", color: "#10b981", bg: "#f0fdf4" },
];

function GradeButton({ option, selected, onClick }) {
  const isSelected = selected === option.value;
  return (
    <button onClick={onClick} style={{ padding: "4px 10px", borderRadius: "6px", border: isSelected ? `2px solid ${option.color}` : "2px solid #e5e7eb", background: isSelected ? option.bg : "#fff", color: isSelected ? option.color : "#6b7280", fontWeight: isSelected ? 700 : 500, fontSize: "12px", cursor: "pointer", transition: "all 0.15s ease", whiteSpace: "nowrap" }}>
      {option.label}
    </button>
  );
}

function ChecklistItem({ item, grade, onGrade }) {
  return (
    <div style={{ display: "flex", alignItems: "flex-start", gap: "12px", padding: "10px 14px", background: grade === 1 ? "#f0fdf4" : grade === 0.5 ? "#fffbeb" : grade === 0 ? "#fef2f2" : "#fafafa", borderRadius: "8px", borderLeft: `3px solid ${grade === 1 ? "#10b981" : grade === 0.5 ? "#f59e0b" : grade === 0 ? "#ef4444" : "#d1d5db"}`, transition: "all 0.2s ease" }}>
      <div style={{ flex: 1, fontSize: "13.5px", color: "#374151", lineHeight: 1.5 }}>
        {item.text}
        <span style={{ color: "#9ca3af", fontSize: "11px", marginLeft: "6px" }}>({item.weight} pt)</span>
      </div>
      <div style={{ display: "flex", gap: "4px", flexShrink: 0 }}>
        {GRADE_OPTIONS.map((opt) => (
          <GradeButton key={opt.value} option={opt} selected={grade} onClick={() => onGrade(item.id, opt.value)} />
        ))}
      </div>
    </div>
  );
}

function Section({ section, grades, onGrade, collapsed, onToggle }) {
  const sectionPoints = section.items.reduce((sum, item) => { const g = grades[item.id]; return g !== undefined ? sum + item.weight * g : sum; }, 0);
  const allGraded = section.items.every((item) => grades[item.id] !== undefined);
  const pct = allGraded ? (sectionPoints / section.maxPoints) * 100 : null;
  return (
    <div style={{ background: "#fff", borderRadius: "12px", boxShadow: "0 1px 3px rgba(0,0,0,0.08)", overflow: "hidden", border: "1px solid #e5e7eb" }}>
      <button onClick={onToggle} style={{ width: "100%", display: "flex", alignItems: "center", justifyContent: "space-between", padding: "14px 18px", background: "none", border: "none", cursor: "pointer", textAlign: "left" }}>
        <div style={{ display: "flex", alignItems: "center", gap: "10px" }}>
          <span style={{ transform: collapsed ? "rotate(-90deg)" : "rotate(0)", transition: "transform 0.2s", fontSize: "12px", color: "#9ca3af" }}>‚ñº</span>
          <span style={{ fontWeight: 700, fontSize: "14px", color: "#1f2937" }}>{section.title}</span>
        </div>
        <div style={{ display: "flex", alignItems: "center", gap: "8px" }}>
          {allGraded && (
            <div style={{ width: "60px", height: "6px", background: "#e5e7eb", borderRadius: "3px", overflow: "hidden" }}>
              <div style={{ width: `${pct}%`, height: "100%", background: pct >= 70 ? "#10b981" : pct >= 40 ? "#f59e0b" : "#ef4444", borderRadius: "3px", transition: "width 0.3s ease" }} />
            </div>
          )}
          <span style={{ fontWeight: 700, fontSize: "13px", color: allGraded ? (pct >= 70 ? "#10b981" : pct >= 40 ? "#f59e0b" : "#ef4444") : "#9ca3af", minWidth: "55px", textAlign: "right" }}>
            {sectionPoints.toFixed(1)} / {section.maxPoints.toFixed(1)}
          </span>
        </div>
      </button>
      {!collapsed && (
        <div style={{ padding: "4px 16px 16px", display: "flex", flexDirection: "column", gap: "6px" }}>
          {section.items.map((item) => (
            <ChecklistItem key={item.id} item={item} grade={grades[item.id]} onGrade={onGrade} />
          ))}
        </div>
      )}
    </div>
  );
}

const BONUS_ITEMS = [
  { id: "bonus1", text: "Contextualiza hist√≥ricamente al autor o autores", weight: 0.25 },
  { id: "bonus2", text: "Se√±ala la importancia del autor en el conjunto de la historia de la filosof√≠a", weight: 0.25 },
  { id: "bonus3", text: "Identifica y explica correctamente la tesis del texto", weight: 0.25 },
  { id: "bonus4", text: "Redacta el texto comparando y contrastando ambos autores de forma coherente y cohesionada", weight: 0.25 },
];

function App() {
  const [grades, setGrades] = useState({});
  const [collapsed, setCollapsed] = useState({});
  const [studentName, setStudentName] = useState("");
  const [notes, setNotes] = useState("");
  const [copyMsg, setCopyMsg] = useState("");
  const [penalty, setPenalty] = useState(0);
  const [bonus, setBonus] = useState({});

  const PENALTY_OPTIONS = [
    { value: 0, label: "Sin penalizaci√≥n" },
    { value: -0.25, label: "-0,25 pts" },
    { value: -0.5, label: "-0,50 pts" },
    { value: -0.75, label: "-0,75 pts" },
    { value: -1, label: "-1,00 pts" },
  ];

  const toggleBonus = useCallback((id) => {
    setBonus((prev) => ({ ...prev, [id]: !prev[id] }));
  }, []);

  const handleGrade = useCallback((itemId, value) => {
    setGrades((prev) => {
      if (prev[itemId] === value) { const next = { ...prev }; delete next[itemId]; return next; }
      return { ...prev, [itemId]: value };
    });
  }, []);

  const toggleSection = useCallback((sectionId) => {
    setCollapsed((prev) => ({ ...prev, [sectionId]: !prev[sectionId] }));
  }, []);

  const totalItems = SECTIONS.reduce((s, sec) => s + sec.items.length, 0);
  const gradedItems = Object.keys(grades).length;
  const rawPoints = SECTIONS.reduce((sum, sec) => sum + sec.items.reduce((s, item) => { const g = grades[item.id]; return g !== undefined ? s + item.weight * g : s; }, 0), 0);
  const bonusPoints = BONUS_ITEMS.reduce((sum, item) => sum + (bonus[item.id] ? item.weight : 0), 0);
  const totalPoints = Math.min(10, Math.max(0, rawPoints + bonusPoints + penalty));
  const maxTotal = 10;
  const allDone = gradedItems === totalItems;

  const getGradeColor = (pts) => { if (pts >= 9) return "#10b981"; if (pts >= 7) return "#34d399"; if (pts >= 5) return "#f59e0b"; if (pts >= 3) return "#f97316"; return "#ef4444"; };
  const getGradeLabel = (pts) => { if (pts >= 9) return "Sobresaliente"; if (pts >= 7) return "Notable"; if (pts >= 5) return "Aprobado"; if (pts >= 3) return "Insuficiente"; return "Muy deficiente"; };

  const resetAll = () => { setGrades({}); setNotes(""); setStudentName(""); setCopyMsg(""); setPenalty(0); setBonus({}); };

  const downloadResults = () => {
    const name = studentName || "Alumno/a";
    const line = "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê";
    const sep  = "‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ";
    let t = "";
    t += line + "\n";
    t += "  " + name.toUpperCase() + "  ‚Äî  NOTA FINAL: " + totalPoints.toFixed(2) + " / 10\n";
    t += line + "\n\n";
    t += "Comentario de texto: San Agust√≠n, Del libre arbitrio II, I, 2\n";
    t += "Di√°logo cr√≠tico con: Nietzsche\n";
    t += sep + "\n\n";
    SECTIONS.forEach((sec) => {
      const secPts = sec.items.reduce((s, item) => { const g = grades[item.id]; return g !== undefined ? s + item.weight * g : s; }, 0);
      t += sec.title + "  [" + secPts.toFixed(1) + " / " + sec.maxPoints.toFixed(1) + "]\n";
      sec.items.forEach((item) => {
        const g = grades[item.id];
        const label = g === 1 ? "Correcto" : g === 0.5 ? "Parcial" : g === 0 ? "No presente" : "Sin evaluar";
        t += "   ‚Ä¢ " + label + " ‚Äî " + item.text + "\n";
      });
      t += "\n";
    });
    t += sep + "\n";
    t += "PUNTUACI√ìN EXTRA";
    if (bonusPoints > 0) t += "  [+" + bonusPoints.toFixed(2) + "]";
    t += "\n";
    BONUS_ITEMS.forEach((item) => {
      const checked = !!bonus[item.id];
      t += "   " + (checked ? "‚úì" : "‚úó") + " " + item.text + (checked ? " (+" + item.weight.toFixed(2) + ")" : "") + "\n";
    });
    t += "\n";
    t += "PENALIZACIONES\n";
    if (penalty < 0) {
      t += "   Ortograf√≠a: " + penalty.toFixed(2) + " pts\n";
    } else {
      t += "   Sin penalizaciones\n";
    }
    t += "\n" + sep + "\n";
    t += "Subtotal √≠tems:     " + rawPoints.toFixed(2) + "\n";
    if (bonusPoints > 0) t += "Puntuaci√≥n extra:  +" + bonusPoints.toFixed(2) + "\n";
    if (penalty < 0) t += "Penalizaci√≥n:      " + penalty.toFixed(2) + "\n";
    t += sep + "\n";
    if (notes) t += "\nObservaciones: " + notes + "\n\n";
    t += line + "\n";
    t += "  " + name.toUpperCase() + "  ‚Äî  NOTA FINAL: " + totalPoints.toFixed(2) + " / 10";
    if (allDone) t += "  (" + getGradeLabel(totalPoints) + ")";
    t += "\n" + line + "\n";

    const blob = new Blob([t], { type: "text/plain;charset=utf-8" });
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    const safeName = name.replace(/[^a-zA-Z0-9√°√©√≠√≥√∫√±√Å√â√ç√ì√ö√ë ]/g, "").replace(/\s+/g, "_");
    a.href = url;
    a.download = "Correccion_Nietzsche_" + safeName + ".txt";
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
    setCopyMsg("‚úì Archivo descargado");
    setTimeout(function() { setCopyMsg(""); }, 3000);
  };

  return (
    <div style={{ maxWidth: "780px", margin: "0 auto", padding: "24px 16px" }}>
      {/* Header */}
      <div style={{ background: "linear-gradient(135deg, #4f46e5, #7c3aed)", borderRadius: "16px", padding: "24px", color: "#fff", marginBottom: "20px" }}>
        <h1 style={{ margin: 0, fontSize: "20px", fontWeight: 800 }}>‚úèÔ∏è Correcci√≥n: Comentario de Texto</h1>
        <p style={{ margin: "6px 0 0", opacity: 0.85, fontSize: "14px" }}>San Agust√≠n, <em>Del libre arbitrio</em> II, I, 2 ‚Äî Di√°logo cr√≠tico con Nietzsche</p>
        <div style={{ marginTop: "14px", display: "flex", gap: "10px", flexWrap: "wrap" }}>
          <div style={{ background: "rgba(255,255,255,0.15)", borderRadius: "8px", padding: "6px 12px", fontSize: "12px" }}>b) An√°lisis cr√≠tico con Nietzsche ‚Äî hasta 8 pts</div>
          <div style={{ background: "rgba(255,255,255,0.15)", borderRadius: "8px", padding: "6px 12px", fontSize: "12px" }}>c) Vocabulario preciso ‚Äî hasta 2 pts</div>
        </div>
        <p style={{ margin: "12px 0 0", opacity: 0.7, fontSize: "11.5px", lineHeight: 1.5 }}>Criterio EVAU: El estudiante debe reconocer el problema, mostrar correctamente el pensamiento de ambos autores y elaborar un breve texto justificativo que los ponga en di√°logo.</p>
      </div>

      {/* Student name */}
      <div style={{ marginBottom: "16px" }}>
        <input type="text" value={studentName} onChange={(e) => setStudentName(e.target.value)} placeholder="Nombre del alumno/a..." style={{ width: "100%", padding: "10px 14px", borderRadius: "10px", border: "1px solid #d1d5db", fontSize: "14px", background: "#fff", boxSizing: "border-box", outline: "none" }} />
      </div>

      {/* Progress */}
      <div style={{ background: "#fff", borderRadius: "12px", padding: "14px 18px", marginBottom: "16px", boxShadow: "0 1px 3px rgba(0,0,0,0.06)", border: "1px solid #e5e7eb" }}>
        <div style={{ display: "flex", justifyContent: "space-between", marginBottom: "8px" }}>
          <span style={{ fontSize: "13px", color: "#6b7280" }}>Progreso: {gradedItems} / {totalItems} √≠tems</span>
          <span style={{ fontSize: "13px", fontWeight: 700, color: getGradeColor(totalPoints) }}>{totalPoints.toFixed(1)} / {maxTotal}</span>
        </div>
        <div style={{ height: "8px", background: "#e5e7eb", borderRadius: "4px", overflow: "hidden" }}>
          <div style={{ width: `${(gradedItems / totalItems) * 100}%`, height: "100%", background: "linear-gradient(90deg, #4f46e5, #7c3aed)", borderRadius: "4px", transition: "width 0.3s ease" }} />
        </div>
      </div>

      {/* Sections */}
      <div style={{ display: "flex", flexDirection: "column", gap: "12px" }}>
        {SECTIONS.map((section) => (
          <Section key={section.id} section={section} grades={grades} onGrade={handleGrade} collapsed={!!collapsed[section.id]} onToggle={() => toggleSection(section.id)} />
        ))}
      </div>

      {/* Bonus */}
      <div style={{ marginTop: "16px", background: "#fff", borderRadius: "12px", padding: "16px 18px", boxShadow: "0 1px 3px rgba(0,0,0,0.08)", border: bonusPoints > 0 ? "1px solid #a5b4fc" : "1px solid #e5e7eb" }}>
        <div style={{ display: "flex", alignItems: "center", gap: "8px", marginBottom: "12px" }}>
          <span style={{ fontSize: "16px" }}>‚≠ê</span>
          <span style={{ fontWeight: 700, fontSize: "14px", color: "#1f2937" }}>Puntuaci√≥n extra</span>
          <span style={{ fontSize: "11px", color: "#6b7280" }}>(hasta +1,00 pts)</span>
          {bonusPoints > 0 && <span style={{ fontSize: "12px", fontWeight: 700, color: "#4f46e5", background: "#eef2ff", padding: "2px 8px", borderRadius: "4px" }}>+{bonusPoints.toFixed(2)}</span>}
        </div>
        <div style={{ display: "flex", flexDirection: "column", gap: "8px" }}>
          {BONUS_ITEMS.map((item) => {
            const checked = !!bonus[item.id];
            return (
              <label key={item.id} style={{ display: "flex", alignItems: "flex-start", gap: "10px", padding: "8px 12px", borderRadius: "8px", cursor: "pointer", background: checked ? "#eef2ff" : "#fafafa", borderLeft: "3px solid " + (checked ? "#4f46e5" : "#d1d5db"), transition: "all 0.15s ease" }}>
                <input type="checkbox" checked={checked} onChange={() => toggleBonus(item.id)} style={{ marginTop: "2px", accentColor: "#4f46e5", width: "16px", height: "16px", cursor: "pointer" }} />
                <div style={{ flex: 1 }}>
                  <span style={{ fontSize: "13.5px", color: "#374151", lineHeight: 1.5 }}>{item.text}</span>
                  <span style={{ color: "#9ca3af", fontSize: "11px", marginLeft: "6px" }}>(+{item.weight} pt)</span>
                </div>
              </label>
            );
          })}
        </div>
      </div>

      {/* Notes */}
      <div style={{ marginTop: "16px" }}>
        <textarea value={notes} onChange={(e) => setNotes(e.target.value)} placeholder="Observaciones generales sobre el comentario..." rows={3} style={{ width: "100%", padding: "12px 14px", borderRadius: "10px", border: "1px solid #d1d5db", fontSize: "13px", background: "#fff", resize: "vertical", boxSizing: "border-box", outline: "none", fontFamily: "inherit" }} />
      </div>

      {/* Penalties */}
      <div style={{ marginTop: "16px", background: "#fff", borderRadius: "12px", padding: "16px 18px", boxShadow: "0 1px 3px rgba(0,0,0,0.08)", border: penalty < 0 ? "1px solid #fca5a5" : "1px solid #e5e7eb" }}>
        <div style={{ display: "flex", alignItems: "center", gap: "8px", marginBottom: "12px" }}>
          <span style={{ fontSize: "16px" }}>‚ö†Ô∏è</span>
          <span style={{ fontWeight: 700, fontSize: "14px", color: "#1f2937" }}>Penalizaciones por ortograf√≠a</span>
          {penalty < 0 && <span style={{ fontSize: "12px", fontWeight: 700, color: "#ef4444", background: "#fef2f2", padding: "2px 8px", borderRadius: "4px" }}>{penalty.toFixed(2)} pts</span>}
        </div>
        <div style={{ display: "flex", gap: "6px", flexWrap: "wrap" }}>
          {PENALTY_OPTIONS.map((opt) => {
            const isSelected = penalty === opt.value;
            const isNone = opt.value === 0;
            return (
              <button key={opt.value} onClick={() => setPenalty(opt.value)} style={{
                padding: "6px 14px", borderRadius: "8px", fontSize: "13px", fontWeight: isSelected ? 700 : 500, cursor: "pointer", transition: "all 0.15s ease", whiteSpace: "nowrap",
                border: isSelected ? (isNone ? "2px solid #10b981" : "2px solid #ef4444") : "2px solid #e5e7eb",
                background: isSelected ? (isNone ? "#f0fdf4" : "#fef2f2") : "#fff",
                color: isSelected ? (isNone ? "#10b981" : "#ef4444") : "#6b7280",
              }}>
                {opt.label}
              </button>
            );
          })}
        </div>
      </div>

      {/* Final score */}
      <div style={{ marginTop: "16px", background: "#fff", borderRadius: "12px", padding: "20px", boxShadow: "0 1px 3px rgba(0,0,0,0.08)", border: "1px solid #e5e7eb", display: "flex", alignItems: "center", justifyContent: "space-between", flexWrap: "wrap", gap: "12px" }}>
        <div>
          <div style={{ fontSize: "12px", color: "#6b7280", textTransform: "uppercase", letterSpacing: "0.05em" }}>Nota final</div>
          <div style={{ fontSize: "36px", fontWeight: 900, color: allDone ? getGradeColor(totalPoints) : "#9ca3af", lineHeight: 1.1 }}>
            {totalPoints.toFixed(1)}<span style={{ fontSize: "16px", fontWeight: 500, color: "#9ca3af" }}> / 10</span>
          </div>
          {allDone && <div style={{ fontSize: "13px", fontWeight: 600, color: getGradeColor(totalPoints), marginTop: "2px" }}>{getGradeLabel(totalPoints)}</div>}
          {allDone && (penalty < 0 || bonusPoints > 0) && <div style={{ fontSize: "11px", color: "#6b7280", marginTop: "4px" }}>({rawPoints.toFixed(1)}{bonusPoints > 0 ? " +" + bonusPoints.toFixed(2) + " extra" : ""}{penalty < 0 ? " " + penalty.toFixed(2) + " ortograf√≠a" : ""})</div>}
        </div>
        <div style={{ display: "flex", gap: "8px", flexWrap: "wrap", alignItems: "center" }}>
          {copyMsg && <span style={{ fontSize: "12px", color: "#10b981", fontWeight: 600 }}>{copyMsg}</span>}
          <button onClick={downloadResults} style={{ padding: "10px 20px", borderRadius: "8px", border: "none", background: "linear-gradient(135deg, #4f46e5, #7c3aed)", color: "#fff", fontWeight: 700, fontSize: "13px", cursor: "pointer" }}>üìÑ Descargar informe (.txt)</button>
          <button onClick={resetAll} style={{ padding: "10px 20px", borderRadius: "8px", border: "1px solid #d1d5db", background: "#fff", color: "#6b7280", fontWeight: 600, fontSize: "13px", cursor: "pointer" }}>üîÑ Reiniciar</button>
        </div>
      </div>

      <p style={{ textAlign: "center", fontSize: "11px", color: "#9ca3af", marginTop: "20px" }}>Historia de la Filosof√≠a ¬∑ 2¬∫ Bachillerato ¬∑ EVAU Madrid</p>
    </div>
  );
}

ReactDOM.createRoot(document.getElementById("root")).render(<App />);
</script>
</body>
</html>
