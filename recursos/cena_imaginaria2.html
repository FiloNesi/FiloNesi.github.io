<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Generador de Guion Filosófico: Popper vs. Kuhn</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; }
    .prose-area { background: #fff; border-radius: 0.75rem; padding: 2rem; box-shadow: 0 2px 8px 0 rgb(0 0 0 / 0.10);}
    .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.6s cubic-bezier(.16,1,.3,1);}
    .accordion-header[aria-expanded="true"] .arrow { transform: rotate(180deg); }
    .pseudoscience-btn { transition: all 0.2s ease; box-shadow: 0 2px 4px rgb(0 0 0 / 0.08);}
    .pseudoscience-btn.selected { border:2px solid #14b8a6; background:#ccfbf1; color:#134e4a;}
    .idea-spark-btn { transition: all 0.2s ease; }
    .idea-spark-btn:active { transform: scale(0.95);}
    #progress-bar { height: 4px; background: linear-gradient(90deg,#14b8a6,#f59e42); width: 0; transition: width 0.7s;}
    #copy-btn.copied { background: #22c55e; }
    .fade-in { animation: fadeIn 0.8s;}
    @keyframes fadeIn {from{opacity:0;}to{opacity:1;}}
  </style>
</head>
<body class="bg-gradient-to-br from-stone-100 via-teal-50 to-orange-50 text-stone-800 fade-in">
  <main class="container mx-auto p-4 sm:p-6 lg:p-8 max-w-5xl">
    <header class="text-center mb-10">
      <h1 class="text-4xl font-extrabold text-teal-800 mb-2 tracking-tight drop-shadow">Generador de Guion Filosófico</h1>
      <p class="text-lg text-stone-600">Popper vs. Kuhn: La Cena de Filósofos</p>
      <div class="flex justify-center mt-2 gap-2">
        <span class="inline-flex items-center px-3 py-1 bg-teal-100 text-teal-700 rounded-full font-bold text-xs">Interactivo</span>
        <span class="inline-flex items-center px-3 py-1 bg-orange-100 text-orange-700 rounded-full font-bold text-xs">Creativo</span>
      </div>
    </header>

    <!-- PROGRESS BAR -->
    <div id="progress-bar" class="rounded mb-6"></div>

    <!-- SECCIÓN 1: INTRODUCCIÓN Y PERSONAJES -->
    <section id="intro" class="mb-12">
      <div class="prose-area mb-8">
        <h2 class="text-2xl font-bold text-teal-700 mb-4 border-b pb-2">Bienvenido/a</h2>
        <p class="text-stone-700">Utiliza esta herramienta interactiva para crear tu propio guion teatral o escena de cómic filosófica. ¡Explora, escribe y aprende!</p>
      </div>
      <div class="grid md:grid-cols-2 gap-8">
        <div class="bg-white p-6 rounded-lg shadow-md border-l-4 border-teal-500 hover:scale-105 transition">
          <h3 class="text-2xl font-bold mb-3 text-stone-800 flex items-center gap-2">
            <span>🧑‍🎓</span> Karl Popper
          </h3>
          <p class="text-stone-600">Filósofo crítico y racionalista. Defiende que una teoría es científica si puede ser falsada.</p>
        </div>
        <div class="bg-white p-6 rounded-lg shadow-md border-l-4 border-orange-500 hover:scale-105 transition">
          <h3 class="text-2xl font-bold mb-3 text-stone-800 flex items-center gap-2">
            <span>🧑‍🔬</span> Thomas Kuhn
          </h3>
          <p class="text-stone-600">Historiador y filósofo de la ciencia. Sostiene que la ciencia cambia mediante revoluciones y paradigmas.</p>
        </div>
      </div>
    </section>

    <!-- SECCIÓN 2: EL ESCENARIO DEL DEBATE -->
    <section id="escenario" class="mb-12 prose-area">
      <h2 class="text-2xl font-bold text-teal-700 mb-6 border-b pb-2">1. Prepara la Escena</h2>
      <div class="grid md:grid-cols-2 gap-6 mb-6">
        <div>
          <label for="titulo" class="block text-sm font-medium text-stone-700 mb-1">Título de la Obra/Escena <span class="text-orange-500">*</span></label>
          <input type="text" id="titulo" class="w-full p-2 border border-teal-300 rounded-md focus:ring-teal-500 focus:border-teal-500" placeholder="Ej: Debate bajo las estrellas">
        </div>
        <div>
          <label for="lugar" class="block text-sm font-medium text-stone-700 mb-1">Lugar y Atmósfera <span class="text-orange-500">*</span></label>
          <input type="text" id="lugar" class="w-full p-2 border border-teal-300 rounded-md focus:ring-teal-500 focus:border-teal-500" placeholder="Ej: Restaurante elegante, noche lluviosa">
        </div>
      </div>
      <div>
        <label class="block text-sm font-medium text-stone-700 mb-2">Elige el Elemento de Tensión (una pseudociencia)</label>
        <div class="flex flex-wrap gap-3 mb-2">
          <button class="pseudoscience-btn bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 px-4 rounded-full" data-name="Astrología"><span>🔮</span> Astrología</button>
          <button class="pseudoscience-btn bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 px-4 rounded-full" data-name="Homeopatía"><span>🌱</span> Homeopatía</button>
          <button class="pseudoscience-btn bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 px-4 rounded-full" data-name="Ufología"><span>🛸</span> Ufología</button>
          <button class="pseudoscience-btn bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 px-4 rounded-full" data-name="Grafología"><span>✍️</span> Grafología</button>
        </div>
        <div id="provocacion" class="mt-4 p-4 bg-stone-50 rounded-lg border border-teal-100 text-stone-600 min-h-[50px] transition-all">
          Selecciona una pseudociencia para ver una chispa que inicie la conversación...
        </div>
      </div>
    </section>

    <!-- SECCIÓN 3: ESTRUCTURA TU GUION -->
    <section id="guion" class="mb-12 prose-area">
      <h2 class="text-2xl font-bold text-teal-700 mb-6 border-b pb-2">2. Escribe el Diálogo</h2>
      <div id="accordion-container">
        <!-- Inicio -->
        <div class="accordion-item border-b border-stone-200">
          <button class="accordion-header w-full text-left p-4 font-semibold text-lg hover:bg-teal-50 flex justify-between items-center" aria-expanded="false">
            <span>a) Inicio</span>
            <span class="arrow transition-transform">&#9660;</span>
          </button>
          <div class="accordion-content" aria-hidden="true">
            <div class="p-4 bg-stone-50">
              <p class="text-sm text-stone-600 mb-2">¿Cómo se encuentran? ¿Cómo comienza la conversación?</p>
              <textarea id="texto-inicio" rows="6" class="w-full p-2 border border-stone-300 rounded-md" placeholder="Escribe el inicio..."></textarea>
            </div>
          </div>
        </div>
        <!-- Desarrollo -->
        <div class="accordion-item border-b border-stone-200">
          <button class="accordion-header w-full text-left p-4 font-semibold text-lg hover:bg-teal-50 flex justify-between items-center" aria-expanded="false">
            <span>b) Desarrollo y Tensión</span>
            <span class="arrow transition-transform">&#9660;</span>
          </button>
          <div class="accordion-content" aria-hidden="true">
            <div class="p-4 bg-stone-50">
              <p class="text-sm text-stone-600 mb-4">Introduce la pseudociencia. Desarrolla los argumentos de Popper y Kuhn.</p>
              <label class="font-semibold text-stone-700">Argumentos de Popper:</label>
              <textarea id="texto-popper" rows="4" class="w-full p-2 border border-stone-300 rounded-md mt-1 mb-2" placeholder="Escribe los argumentos de Popper..."></textarea>
              <button class="idea-spark-btn text-sm bg-teal-100 text-teal-800 py-1 px-3 rounded-full mb-4" data-target="texto-popper" data-idea="¿Es falsable la pseudociencia?">💡 Idea rápida Popper</button>
              <label class="font-semibold text-stone-700">Argumentos de Kuhn:</label>
              <textarea id="texto-kuhn" rows="4" class="w-full p-2 border border-stone-300 rounded-md mt-1 mb-2" placeholder="Escribe los argumentos de Kuhn..."></textarea>
              <button class="idea-spark-btn text-sm bg-orange-100 text-orange-800 py-1 px-3 rounded-full mb-4" data-target="texto-kuhn" data-idea="¿Forma parte de un paradigma la pseudociencia?">💡 Idea rápida Kuhn</button>
            </div>
          </div>
        </div>
        <!-- Cierre -->
        <div class="accordion-item">
          <button class="accordion-header w-full text-left p-4 font-semibold text-lg hover:bg-teal-50 flex justify-between items-center" aria-expanded="false">
            <span>c) Cierre (posible)</span>
            <span class="arrow transition-transform">&#9660;</span>
          </button>
          <div class="accordion-content" aria-hidden="true">
            <div class="p-4 bg-stone-50">
              <p class="text-sm text-stone-600 mb-2">¿Llegan a un acuerdo o no? Escribe una conclusión para la escena.</p>
              <textarea id="texto-cierre" rows="4" class="w-full p-2 border border-stone-300 rounded-md" placeholder="Escribe el cierre..."></textarea>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- SECCIÓN 4: PIDE AYUDA -->
    <section id="ayuda" class="mb-12 prose-area">
      <h2 class="text-2xl font-bold text-teal-700 mb-6 border-b pb-2">3. Pide ayuda</h2>
      <div>
        <label class="block text-sm font-medium text-stone-700 mb-2">¿Necesitas inspiración? Puedes pedir ayuda a "Teatro filosófico"</label>
        <div class="flex flex-wrap gap-3">
          <a class="pseudoscience-btn bg-orange-500 hover:bg-orange-600 text-white font-bold py-2 px-4 rounded-full" href="https://chatgpt.com/g/g-67a7211a6888819189ebc2d9d-teatro-filosofico" target="_blank">💭 Ir al chat de ayuda</a>
        </div>
      </div>
    </section>

    <!-- SECCIÓN 5: FORMATO Y EXPORTACIÓN -->
    <section id="formato" class="mb-12 prose-area">
      <h2 class="text-2xl font-bold text-teal-700 mb-6 border-b pb-2">4. Da Formato y Genera tu Guion</h2>
      <div class="flex items-center justify-center gap-4 mb-6">
        <span class="font-semibold">Teatro</span>
        <label class="relative inline-flex items-center cursor-pointer">
          <input type="checkbox" id="format-toggle" class="sr-only peer">
          <div class="w-11 h-6 bg-stone-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:bg-teal-500"></div>
        </label>
        <span class="font-semibold">Cómic</span>
      </div>
      <div id="teatro-guide">
        <h4 class="font-bold text-stone-700">Guía para Guion Teatral:</h4>
        <ul class="list-disc list-inside text-sm text-stone-600">
          <li><span class="font-semibold">Acotaciones:</span> Usa paréntesis para describir acciones, gestos, tonos de voz.</li>
          <li><span class="font-semibold">Diálogo:</span> Escribe el nombre del personaje en mayúsculas seguido de dos puntos.</li>
        </ul>
      </div>
      <div id="comic-guide" class="hidden">
        <h4 class="font-bold text-stone-700">Guía para Guion de Cómic:</h4>
        <ul class="list-disc list-inside text-sm text-stone-600">
          <li><span class="font-semibold">Descripción de viñetas:</span> Describe qué se ve en cada cuadro.</li>
          <li><span class="font-semibold">Bocadillos:</span> Indica quién habla y qué dice.</li>
        </ul>
      </div>
      <div class="text-center mt-8">
        <button id="generate-btn" class="bg-teal-600 hover:bg-teal-700 text-white font-bold py-3 px-8 rounded-lg text-lg shadow-lg flex items-center justify-center gap-2">
          <span>🎬</span> Generar Guion Completo
        </button>
      </div>
    </section>

    <!-- SECCIÓN 6: RESULTADO FINAL -->
    <section id="resultado" class="hidden fade-in">
      <div class="prose-area">
        <h2 class="text-2xl font-bold text-teal-700 mb-4 border-b pb-2">Tu Guion</h2>
        <p class="text-sm text-stone-600 mb-4">¡Aquí está tu obra maestra! Puedes copiar el texto y pegarlo en tu editor favorito.</p>
        <div id="final-script" class="w-full p-4 bg-stone-50 border border-stone-200 rounded-md whitespace-pre-wrap font-mono"></div>
        <div class="text-center mt-4">
          <button id="copy-btn" class="bg-stone-500 hover:bg-teal-600 text-white font-bold py-2 px-4 rounded-md transition-all">Copiar Guion</button>
          <p id="copy-feedback" class="text-sm text-teal-600 mt-2 h-4"></p>
        </div>
      </div>
    </section>

    <footer class="text-center mt-12 text-sm text-stone-500">
      <p>Herramienta de aprendizaje basada en la propuesta de la sesión "La Cena Imaginaria".</p>
    </footer>
  </main>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Pseudociencias y provocaciones
      const provocaciones = {
        'Astrología': 'Alguien comenta: "Soy Leo, por eso soy líder". Popper reacciona al instante...',
        'Homeopatía': 'Un comensal pide un remedio homeopático en vez de analgésico, diciendo "lo natural siempre es mejor".',
        'Ufología': 'La conversación deriva en OVNIs. Alguien defiende que son visitas extraterrestres.',
        'Grafología': 'Un invitado ofrece analizar la personalidad de los demás por su firma, asegurando que es científico.'
      };

      // PROGRESS BAR
      function setProgress(percent) {
        document.getElementById('progress-bar').style.width = percent + '%';
      }

      // Pseudoscience select feedback
      const pseudocienceBtns = document.querySelectorAll('.pseudoscience-btn');
      const provocacionDiv = document.getElementById('provocacion');
      pseudocienceBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          pseudocienceBtns.forEach(b => b.classList.remove('selected'));
          btn.classList.add('selected');
          const name = btn.dataset.name;
          provocacionDiv.textContent = provocaciones[name] || 'Selecciona una pseudociencia...';
          setProgress(25);
        });
      });

      // Accordion interactivity + accessibility
      document.querySelectorAll('.accordion-header').forEach(header => {
        header.addEventListener('click', () => {
          const expanded = header.getAttribute('aria-expanded') === 'true';
          document.querySelectorAll('.accordion-header').forEach(h => h.setAttribute('aria-expanded', false));
          document.querySelectorAll('.accordion-content').forEach(c => c.style.maxHeight = null);
          document.querySelectorAll('.accordion-content').forEach(c => c.setAttribute('aria-hidden', true));
          document.querySelectorAll('.arrow').forEach(arrow => arrow.style.transform = '');
          if (!expanded) {
            header.setAttribute('aria-expanded', true);
            const content = header.nextElementSibling;
            content.style.maxHeight = content.scrollHeight + "px";
            content.setAttribute('aria-hidden', false);
            setProgress(40);
          }
        });
      });

      // Idea spark buttons
      document.querySelectorAll('.idea-spark-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          const targetId = btn.dataset.target;
          const idea = btn.dataset.idea;
          const textarea = document.getElementById(targetId);
          textarea.value += (textarea.value ? '\n' : '') + idea;
        });
      });

      // Toggle formato guía
      document.getElementById('format-toggle').addEventListener('change', () => {
        document.getElementById('teatro-guide').classList.toggle('hidden');
        document.getElementById('comic-guide').classList.toggle('hidden');
        setProgress(60);
      });

      // Generar guion
      const generateBtn = document.getElementById('generate-btn');
      const resultadoSection = document.getElementById('resultado');
      const finalScriptDiv = document.getElementById('final-script');
      generateBtn.addEventListener('click', () => {
        setProgress(90);
        const titulo = document.getElementById('titulo').value;
        const lugar = document.getElementById('lugar').value;
        const pseudocienciaSeleccionada = document.querySelector('.pseudoscience-btn.selected');
        const pseudocienciaTexto = pseudocienciaSeleccionada ? pseudocienciaSeleccionada.dataset.name : "No seleccionada";
        const inicio = document.getElementById('texto-inicio').value;
        const popper = document.getElementById('texto-popper').value;
        const kuhn = document.getElementById('texto-kuhn').value;
        const cierre = document.getElementById('texto-cierre').value;
        let script = `TÍTULO: ${titulo || "Sin Título"}\n`;
        script += `ESCENARIO: ${lugar || "No definido"}\n`;
        script += `ELEMENTO DE TENSIÓN: ${pseudocienciaTexto}\n`;
        script += `-------------------------------------------------------\n\n`;
        script += `### INICIO ###\n\n${inicio || "(Sin contenido)"}\n\n`;
        script += `### DESARROLLO Y TENSIÓN ###\n\n[Argumentos de Popper]\n${popper || "(Sin contenido)"}\n\n[Argumentos de Kuhn]\n${kuhn || "(Sin contenido)"}\n\n`;
        script += `### CIERRE ###\n\n${cierre || "(Sin contenido)"}\n`;
        finalScriptDiv.textContent = script;
        resultadoSection.classList.remove('hidden');
        resultadoSection.classList.add('fade-in');
        setProgress(100);
        window.scrollTo({ top: resultadoSection.offsetTop, behavior: 'smooth' });
      });

      // Copy guion animado
      document.getElementById('copy-btn').addEventListener('click', function () {
        const textToCopy = finalScriptDiv.textContent;
        navigator.clipboard.writeText(textToCopy).then(() => {
          this.classList.add('copied');
          document.getElementById('copy-feedback').textContent = '¡Copiado!';
          setTimeout(() => {
            this.classList.remove('copied');
            document.getElementById('copy-feedback').textContent = '';
          }, 2000);
        }).catch(err => {
          document.getElementById('copy-feedback').textContent = 'Error al copiar';
        });
      });
    });
  </script>
</body>
</html>
